import os
import random
import re
from telethon import events

# –ü—É—Ç—å –∫ –≥–∏—Ñ–∫–µ
GIF_PATH = os.path.abspath("–í–∏–¥–µ–æ_–º–∞—Ç–µ—Ä–∏–∞–ª/Gif/Vacation.gif")

# –†–∞–Ω–¥–æ–º–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –¥–ª—è –æ—Ç–≤–µ—Ç–∞
VACATION_MESSAGES = [
   
   "**–û—Ç–ø—É—Å–∫ –Ω–∞—á–∞–ª—Å—è! üéâ**\n\n–ó–∞–±—É–¥—å –ø—Ä–æ –±—É–¥–∏–ª—å–Ω–∏–∫–∏ –∏ –¥–µ–¥–ª–∞–π–Ω—ã ‚Äì —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –æ—Ç–¥—ã—Ö, —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ –∏ –Ω–æ–≤—ã–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è! –ù–∞—Å–ª–∞–∂–¥–∞–π—Å—è –∫–∞–∂–¥—ã–º –º–æ–º–µ–Ω—Ç–æ–º! üå¥‚òÄÔ∏è",  

   "**–°–≤–æ–±–æ–¥–∞, –ë–†–û! üöÄ**\n\n–û—Å—Ç–∞–≤—å –∑–∞–±–æ—Ç—ã –ø–æ–∑–∞–¥–∏, –≤–ø–µ—Ä–µ–¥–∏ —Ç–æ–ª—å–∫–æ –æ—Ç–¥—ã—Ö –∏ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è! –ü—É—Å—Ç—å –æ—Ç–ø—É—Å–∫ –±—É–¥–µ—Ç –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–º! üòéüî•",  

   "**–†–µ–∂–∏–º –æ—Ç–¥—ã—Ö–∞ –≤–∫–ª—é—á—ë–Ω! üèñÔ∏è**\n\n–í—Ä–µ–º—è –∑–∞–±—ã—Ç—å –ø—Ä–æ —Ä–∞–±–æ—Ç—É –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ—Å–≤—è—Ç–∏—Ç—å —Å–µ–±—è –æ—Ç–¥—ã—Ö—É! –õ–æ–≤–∏ –∫–∞–∂–¥—ã–π –º–∏–≥ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è! üçπ",  

   "**–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞! üåç**\n\n–ü—É—Ç–µ—à–µ—Å—Ç–≤—É–π, –æ—Ç–¥—ã—Ö–∞–π, –∑–∞—Ä—è–∂–∞–π—Å—è! –ü—É—Å—Ç—å —ç—Ç–æ—Ç –æ—Ç–ø—É—Å–∫ –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω —è—Ä–∫–∏–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏ –∏ –∫—Ä—É—Ç—ã–º–∏ —ç–º–æ—Ü–∏—è–º–∏! ‚úàÔ∏èüíô",  

   "**–ù–∞—Å—Ç–æ—è—â–∏–π —á–∏–ª–ª! üé∂**\n\n–°–µ–π—á–∞—Å —Ç–æ–ª—å–∫–æ –º–æ—Ä–µ, —Å–æ–ª–Ω—Ü–µ, –ø—Ä–∏—Ä–æ–¥–∞ –∏ –ø–æ–ª–Ω–æ–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ! –õ–æ–≤–∏ –≤–æ–ª–Ω—É –ø–æ–∑–∏—Ç–∏–≤–∞ –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Å—è! üåäüòå",  
] 

def register_auto_reply(client):
    """–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç –Ω–∞ —Å–ª–æ–≤–æ '–û—Ç–ø—É—Å–∫Pro' —Å —Ç–æ—á–Ω—ã–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ–º."""

    @client.on(events.NewMessage(outgoing=True))
    async def vacation_reply(event):
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ (–Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ–º –Ω–∞ "–æ—Ç–ø—É—Å–∫pro" –∏ —Ç.–¥.)
        if re.fullmatch(r"–û—Ç–ø—É—Å–∫Pro", event.message.text):
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ **–Ω–µ** –≤ –≥—Ä—É–ø–ø–µ –∏ **–Ω–µ** –≤ –∫–∞–Ω–∞–ª–µ
            if event.is_group or event.is_channel:
                print("–ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø–µ/–∫–∞–Ω–∞–ª–µ")
                return  

            random_text = random.choice(VACATION_MESSAGES)

            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞
            if not os.path.exists(GIF_PATH):
                print(f"–û—à–∏–±–∫–∞: –§–∞–π–ª '{GIF_PATH}' –Ω–µ –Ω–∞–π–¥–µ–Ω!")
                await event.respond(random_text)
                return

            await event.client.send_file(event.chat_id, GIF_PATH, caption=random_text)
            print(f"Sent to {event.chat_id}: gif + text")