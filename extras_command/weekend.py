import os
import random
import re
from telethon import events

# –ü—É—Ç—å –∫ –≥–∏—Ñ–∫–µ
GIF_PATH = os.path.abspath("–í–∏–¥–µ–æ_–º–∞—Ç–µ—Ä–∏–∞–ª/Gif/Resting.gif")

# –†–∞–Ω–¥–æ–º–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –¥–ª—è –æ—Ç–≤–µ—Ç–∞
WEEKEND_MESSAGES = [  
    "**–ù–∞—Å—Ç—É–ø–∏–ª –≤—ã—Ö–æ–¥–Ω–æ–π! üéâ**\n\n–í—Ä–µ–º—è —Ä–∞—Å—Å–ª–∞–±–∏—Ç—å—Å—è, –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –∏ –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∏—Ç—å—Å—è! –ù–∞—Å–ª–∞–∂–¥–∞–π—Å—è –º–æ–º–µ–Ω—Ç–æ–º –∏ –Ω–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ –≤–µ—Å–µ–ª—å–µ! üòéüî•",  

    "**–í—ã—Ö–æ–¥–Ω–æ–π, –ë–†–û! üöÄ**\n\n–ó–∞–±—É–¥—å –ø—Ä–æ –±—É–¥–Ω–∏—á–Ω—ã–µ –∑–∞–±–æ—Ç—ã, —Å–µ–≥–æ–¥–Ω—è —Ç–æ–ª—å–∫–æ –∫–∞–π—Ñ –∏ –æ—Ç–¥—ã—Ö! –ü—É—Å—Ç—å —ç—Ç–æ—Ç –¥–µ–Ω—å –ø—Ä–∏–Ω–µ—Å—ë—Ç –∫—É—á—É –ø–æ–∑–∏—Ç–∏–≤–∞! üéä",  

    "**–î–µ–Ω—å –æ—Ç–¥—ã—Ö–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! ‚òÄÔ∏è**\n\n–ü–æ—Ä–∞ –≤—ã–∫–ª—é—á–∏—Ç—å —Ä–∞–±–æ—á–∏–π —Ä–µ–∂–∏–º –∏ –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º —á–∏–ª–ª–∞! –ù–∞—Å–ª–∞–∂–¥–∞–π—Å—è –≤—ã—Ö–æ–¥–Ω—ã–º! üèñÔ∏è",  

    "**–í—Ä–µ–º—è —á–∏–ª–ª–∞! üé∂**\n\n–°–µ–≥–æ–¥–Ω—è –∏–¥–µ–∞–ª—å–Ω—ã–π –¥–µ–Ω—å –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –¥–µ–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –ø—Ä–∏–Ω–æ—Å–∏—Ç —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ! –ü—É—Å—Ç—å –≤—ã—Ö–æ–¥–Ω–æ–π –ø—Ä–æ–π–¥—ë—Ç –Ω–∞ 100%! üçπ",  

    "**–í—ã—Ö–æ–¥–Ω–æ–π ‚Äî —ç—Ç–æ —Å–≤—è—Ç–æ–µ! üôå**\n\n–û—Ç–¥—ã—Ö–∞–π, –∑–∞—Ä—è–∂–∞–π—Å—è —ç–Ω–µ—Ä–≥–∏–µ–π –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Å—è –∫–∞–∂–¥—ã–º –º–æ–º–µ–Ω—Ç–æ–º! –£–¥–∞—á–Ω–æ–≥–æ –¥–Ω—è! üòç",  
]  

def register_auto_reply(client):
    """–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç –Ω–∞ —Å–ª–æ–≤–æ '–í–∏—Ö–æ–¥–Ω–æ–πPro' —Å —Ç–æ—á–Ω—ã–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞."""

    @client.on(events.NewMessage(outgoing=True))
    async def weekend_reply(event):
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ—á–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ "–í–∏—Ö–æ–¥–Ω–æ–πPro"
        if re.fullmatch(r"–í–∏—Ö–æ–¥–Ω–æ–πPro", event.message.text):
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ **–Ω–µ** –≤ –≥—Ä—É–ø–ø–µ –∏ **–Ω–µ** –≤ –∫–∞–Ω–∞–ª–µ
            if event.is_group or event.is_channel:
                print("–ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø–µ/–∫–∞–Ω–∞–ª–µ")
                return  

            random_text = random.choice(WEEKEND_MESSAGES)

            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞
            if not os.path.exists(GIF_PATH):
                print(f"–û—à–∏–±–∫–∞: –§–∞–π–ª '{GIF_PATH}' –Ω–µ –Ω–∞–π–¥–µ–Ω!")
                await event.respond(random_text)
                return

            await event.client.send_file(event.chat_id, GIF_PATH, caption=random_text)
            print(f"Sent to {event.chat_id}: gif + text")